{"fill_rate": 0.3551132767288775, "f1": 88.21768668110452, "meta": {"annotate": "35", "cat_fun_name": "is_full_block", "checkpoint": {"config": {"_name_or_path": "bert-base-uncased", "architectures": ["BertForQuestionAnswering"], "attention_probs_dropout_prob": 0.1, "gradient_checkpointing": false, "hidden_act": "gelu", "hidden_dropout_prob": 0.1, "hidden_size": 768, "initializer_range": 0.02, "intermediate_size": 3072, "layer_norm_eps": 1e-12, "max_position_embeddings": 512, "model_type": "bert", "num_attention_heads": 12, "num_hidden_layers": 12, "pad_token_id": 0, "position_embedding_type": "absolute", "type_vocab_size": 2, "vocab_size": 30522}, "eval_metrics": {"exact_match": 80.9271523178808, "f1": 88.21768668110452}, "path": "/data_2to/devel_data/nn_pruning/output/squad_test_aws/aws_nn-pruning-v11-a4-l10-dl1--2021-01-24--15-47-42/checkpoint-110660", "sparse_args": {"ampere_pruning_method": "disabled", "attention_block_cols": 4, "attention_block_rows": 4, "attention_lambda": 1.0, "attention_output_with_dense": 0, "attention_pruning_method": "sigmoied_threshold", "bias_mask": true, "dense_block_cols": 4, "dense_block_rows": 4, "dense_lambda": 1.0, "dense_pruning_method": "sigmoied_threshold", "distil_alpha_ce": 0.1, "distil_alpha_teacher": 0.9, "distil_teacher_name_or_path": "csarron/bert-base-uncased-squad-v1", "distil_temperature": 2.0, "final_ampere_temperature": 20.0, "final_threshold": 0.1, "final_warmup": 10, "initial_ampere_temperature": 0.0, "initial_threshold": 0, "initial_warmup": 1, "mask_init": "constant", "mask_scale": 0.0, "mask_scores_learning_rate": 0.01, "regularization": "l1", "regularization_final_lambda": 10.0}, "speed": {"cuda_eval_elapsed_time": 33.44704815673828, "eval_elapsed_time": 40.718972705770284}, "speedup": 1.1538953400165994, "stats": {"layers": {"0": {"linear_attention_nnz": 528912, "linear_attention_total": 2359296, "linear_dense_nnz": 2409360, "linear_dense_total": 4718592, "linear_nnz": 2938272, "linear_total": 7077888, "nnz": 2947176, "total": 7087872}, "1": {"linear_attention_nnz": 618448, "linear_attention_total": 2359296, "linear_dense_nnz": 2534112, "linear_dense_total": 4718592, "linear_nnz": 3152560, "linear_total": 7077888, "nnz": 3161488, "total": 7087872}, "10": {"linear_attention_nnz": 357616, "linear_attention_total": 2359296, "linear_dense_nnz": 309216, "linear_dense_total": 4718592, "linear_nnz": 666832, "linear_total": 7077888, "nnz": 674224, "total": 7087872}, "11": {"linear_attention_nnz": 219536, "linear_attention_total": 2359296, "linear_dense_nnz": 276672, "linear_dense_total": 4718592, "linear_nnz": 496208, "linear_total": 7077888, "nnz": 502932, "total": 7087872}, "2": {"linear_attention_nnz": 835904, "linear_attention_total": 2359296, "linear_dense_nnz": 2670704, "linear_dense_total": 4718592, "linear_nnz": 3506608, "linear_total": 7077888, "nnz": 3515852, "total": 7087872}, "3": {"linear_attention_nnz": 958400, "linear_attention_total": 2359296, "linear_dense_nnz": 2670800, "linear_dense_total": 4718592, "linear_nnz": 3629200, "linear_total": 7077888, "nnz": 3638572, "total": 7087872}, "4": {"linear_attention_nnz": 1091248, "linear_attention_total": 2359296, "linear_dense_nnz": 2620432, "linear_dense_total": 4718592, "linear_nnz": 3711680, "linear_total": 7077888, "nnz": 3721476, "total": 7087872}, "5": {"linear_attention_nnz": 1029984, "linear_attention_total": 2359296, "linear_dense_nnz": 2535968, "linear_dense_total": 4718592, "linear_nnz": 3565952, "linear_total": 7077888, "nnz": 3575596, "total": 7087872}, "6": {"linear_attention_nnz": 964544, "linear_attention_total": 2359296, "linear_dense_nnz": 2286960, "linear_dense_total": 4718592, "linear_nnz": 3251504, "linear_total": 7077888, "nnz": 3261196, "total": 7087872}, "7": {"linear_attention_nnz": 813552, "linear_attention_total": 2359296, "linear_dense_nnz": 1727488, "linear_dense_total": 4718592, "linear_nnz": 2541040, "linear_total": 7077888, "nnz": 2550228, "total": 7087872}, "8": {"linear_attention_nnz": 744336, "linear_attention_total": 2359296, "linear_dense_nnz": 1096768, "linear_dense_total": 4718592, "linear_nnz": 1841104, "linear_total": 7077888, "nnz": 1850448, "total": 7087872}, "9": {"linear_attention_nnz": 473664, "linear_attention_total": 2359296, "linear_dense_nnz": 386800, "linear_dense_total": 4718592, "linear_nnz": 860464, "linear_total": 7077888, "nnz": 868284, "total": 7087872}}, "linear_nnz": 30161424, "linear_sparsity": 64.48867232711225, "linear_total": 84934656, "nnz": 54106194, "pruned_heads": {"0": [], "1": [0, 2], "10": [1, 4, 5], "11": [8, 11, 5, 7], "2": [8, 4], "3": [2, 4, 6], "4": [], "5": [1], "6": [3], "7": [11, 3, 6, 7], "8": [0, 4], "9": [1, 4, 5, 7, 10]}, "total": 108893186, "total_sparsity": 50.31259899035372}, "training_args": {"_n_gpu": -1, "adafactor": false, "adam_beta1": 0.9, "adam_beta2": 0.999, "adam_epsilon": 1e-08, "dataloader_drop_last": false, "dataloader_num_workers": 0, "dataloader_pin_memory": true, "ddp_find_unused_parameters": null, "debug": false, "deepspeed": null, "disable_tqdm": false, "do_eval": 1, "do_predict": false, "do_train": 1, "eval_accumulation_steps": null, "eval_steps": 5000, "evaluation_strategy": "steps", "fp16": false, "fp16_backend": "auto", "fp16_full_eval": false, "fp16_opt_level": "O1", "gradient_accumulation_steps": 1, "greater_is_better": null, "group_by_length": false, "ignore_data_skip": false, "label_names": null, "label_smoothing_factor": 0.0, "learning_rate": 3e-05, "load_best_model_at_end": false, "local_rank": -1, "logging_dir": "/opt/ml/output", "logging_first_step": false, "logging_steps": 250, "logging_strategy": "steps", "lr_scheduler_type": "linear", "max_grad_norm": 1.0, "max_steps": -1, "metric_for_best_model": null, "no_cuda": false, "num_train_epochs": 20.0, "optimize_model_before_eval": "disabled", "output_dir": "/opt/ml/model", "overwrite_output_dir": 1, "past_index": -1, "per_device_eval_batch_size": 8, "per_device_train_batch_size": 16, "per_gpu_eval_batch_size": null, "per_gpu_train_batch_size": null, "prediction_loss_only": false, "remove_unused_columns": true, "report_to": null, "run_name": "/opt/ml/model", "save_steps": 5000, "save_strategy": "steps", "save_total_limit": 50, "seed": 17, "sharded_ddp": false, "skip_memory_metrics": false, "tpu_metrics_debug": false, "tpu_num_cores": null, "warmup_ratio": 0.0, "warmup_steps": 5400, "weight_decay": 0.0}}, "f1": 88.21768668110452, "fill_rate": 0.3551132767288775, "speedup": 1.1538953400165994}}
{"fill_rate": 0.22577770845389655, "f1": 87.37325813950282, "meta": {"annotate": "22", "cat_fun_name": "is_full_block", "checkpoint": {"config": {"_name_or_path": "bert-base-uncased", "architectures": ["BertForQuestionAnswering"], "attention_probs_dropout_prob": 0.1, "gradient_checkpointing": false, "hidden_act": "gelu", "hidden_dropout_prob": 0.1, "hidden_size": 768, "initializer_range": 0.02, "intermediate_size": 3072, "layer_norm_eps": 1e-12, "max_position_embeddings": 512, "model_type": "bert", "num_attention_heads": 12, "num_hidden_layers": 12, "pad_token_id": 0, "position_embedding_type": "absolute", "type_vocab_size": 2, "vocab_size": 30522}, "eval_metrics": {"exact_match": 79.72563859981078, "f1": 87.37325813950282}, "path": "/data_2to/devel_data/nn_pruning/output/squad_test_aws/aws_nn-pruning-v11-a4-l20-dl1--2021-01-24--15-48-09/checkpoint-110000", "sparse_args": {"ampere_pruning_method": "disabled", "attention_block_cols": 4, "attention_block_rows": 4, "attention_lambda": 1.0, "attention_output_with_dense": 0, "attention_pruning_method": "sigmoied_threshold", "bias_mask": true, "dense_block_cols": 4, "dense_block_rows": 4, "dense_lambda": 1.0, "dense_pruning_method": "sigmoied_threshold", "distil_alpha_ce": 0.1, "distil_alpha_teacher": 0.9, "distil_teacher_name_or_path": "csarron/bert-base-uncased-squad-v1", "distil_temperature": 2.0, "final_ampere_temperature": 20.0, "final_threshold": 0.1, "final_warmup": 10, "initial_ampere_temperature": 0.0, "initial_threshold": 0, "initial_warmup": 1, "mask_init": "constant", "mask_scale": 0.0, "mask_scores_learning_rate": 0.01, "regularization": "l1", "regularization_final_lambda": 20.0}, "speed": {"cuda_eval_elapsed_time": 29.62903995513916, "eval_elapsed_time": 37.18844554480165}, "speedup": 1.302586687378539, "stats": {"layers": {"0": {"linear_attention_nnz": 369024, "linear_attention_total": 2359296, "linear_dense_nnz": 1492400, "linear_dense_total": 4718592, "linear_nnz": 1861424, "linear_total": 7077888, "nnz": 1870032, "total": 7087872}, "1": {"linear_attention_nnz": 467072, "linear_attention_total": 2359296, "linear_dense_nnz": 1640528, "linear_dense_total": 4718592, "linear_nnz": 2107600, "linear_total": 7077888, "nnz": 2116180, "total": 7087872}, "10": {"linear_attention_nnz": 242352, "linear_attention_total": 2359296, "linear_dense_nnz": 173264, "linear_dense_total": 4718592, "linear_nnz": 415616, "linear_total": 7077888, "nnz": 422044, "total": 7087872}, "11": {"linear_attention_nnz": 157280, "linear_attention_total": 2359296, "linear_dense_nnz": 168800, "linear_dense_total": 4718592, "linear_nnz": 326080, "linear_total": 7077888, "nnz": 332188, "total": 7087872}, "2": {"linear_attention_nnz": 643248, "linear_attention_total": 2359296, "linear_dense_nnz": 1776032, "linear_dense_total": 4718592, "linear_nnz": 2419280, "linear_total": 7077888, "nnz": 2428408, "total": 7087872}, "3": {"linear_attention_nnz": 744560, "linear_attention_total": 2359296, "linear_dense_nnz": 1758000, "linear_dense_total": 4718592, "linear_nnz": 2502560, "linear_total": 7077888, "nnz": 2511776, "total": 7087872}, "4": {"linear_attention_nnz": 773760, "linear_attention_total": 2359296, "linear_dense_nnz": 1672784, "linear_dense_total": 4718592, "linear_nnz": 2446544, "linear_total": 7077888, "nnz": 2456100, "total": 7087872}, "5": {"linear_attention_nnz": 636208, "linear_attention_total": 2359296, "linear_dense_nnz": 1581568, "linear_dense_total": 4718592, "linear_nnz": 2217776, "linear_total": 7077888, "nnz": 2226980, "total": 7087872}, "6": {"linear_attention_nnz": 605664, "linear_attention_total": 2359296, "linear_dense_nnz": 1321040, "linear_dense_total": 4718592, "linear_nnz": 1926704, "linear_total": 7077888, "nnz": 1935868, "total": 7087872}, "7": {"linear_attention_nnz": 548160, "linear_attention_total": 2359296, "linear_dense_nnz": 906384, "linear_dense_total": 4718592, "linear_nnz": 1454544, "linear_total": 7077888, "nnz": 1463048, "total": 7087872}, "8": {"linear_attention_nnz": 486464, "linear_attention_total": 2359296, "linear_dense_nnz": 524352, "linear_dense_total": 4718592, "linear_nnz": 1010816, "linear_total": 7077888, "nnz": 1019180, "total": 7087872}, "9": {"linear_attention_nnz": 306864, "linear_attention_total": 2359296, "linear_dense_nnz": 180544, "linear_dense_total": 4718592, "linear_nnz": 487408, "linear_total": 7077888, "nnz": 493692, "total": 7087872}}, "linear_nnz": 19176352, "linear_sparsity": 77.42222915461035, "linear_total": 84934656, "nnz": 43114218, "pruned_heads": {"0": [9, 4, 5], "1": [0, 8, 2, 5], "10": [1, 4, 5, 6, 7, 8], "11": [0, 5, 7, 8, 10, 11], "2": [8, 4, 7], "3": [2, 4, 6], "4": [], "5": [1, 2], "6": [2, 3, 7], "7": [11, 3, 6, 7], "8": [0, 8, 4], "9": [1, 3, 4, 5, 7, 9, 10]}, "total": 108893186, "total_sparsity": 60.40687247409585}, "training_args": {"_n_gpu": -1, "adafactor": false, "adam_beta1": 0.9, "adam_beta2": 0.999, "adam_epsilon": 1e-08, "dataloader_drop_last": false, "dataloader_num_workers": 0, "dataloader_pin_memory": true, "ddp_find_unused_parameters": null, "debug": false, "deepspeed": null, "disable_tqdm": false, "do_eval": 1, "do_predict": false, "do_train": 1, "eval_accumulation_steps": null, "eval_steps": 5000, "evaluation_strategy": "steps", "fp16": false, "fp16_backend": "auto", "fp16_full_eval": false, "fp16_opt_level": "O1", "gradient_accumulation_steps": 1, "greater_is_better": null, "group_by_length": false, "ignore_data_skip": false, "label_names": null, "label_smoothing_factor": 0.0, "learning_rate": 3e-05, "load_best_model_at_end": false, "local_rank": -1, "logging_dir": "/opt/ml/output", "logging_first_step": false, "logging_steps": 250, "logging_strategy": "steps", "lr_scheduler_type": "linear", "max_grad_norm": 1.0, "max_steps": -1, "metric_for_best_model": null, "no_cuda": false, "num_train_epochs": 20.0, "optimize_model_before_eval": "disabled", "output_dir": "/opt/ml/model", "overwrite_output_dir": 1, "past_index": -1, "per_device_eval_batch_size": 8, "per_device_train_batch_size": 16, "per_gpu_eval_batch_size": null, "per_gpu_train_batch_size": null, "prediction_loss_only": false, "remove_unused_columns": true, "report_to": null, "run_name": "/opt/ml/model", "save_steps": 5000, "save_strategy": "steps", "save_total_limit": 50, "seed": 17, "sharded_ddp": false, "skip_memory_metrics": false, "tpu_metrics_debug": false, "tpu_num_cores": null, "warmup_ratio": 0.0, "warmup_steps": 5400, "weight_decay": 0.0}}, "f1": 87.37325813950282, "fill_rate": 0.22577770845389655, "speedup": 1.302586687378539}}
{"fill_rate": 0.1314994906201774, "f1": 85.93146728512978, "meta": {"annotate": "13", "cat_fun_name": "is_full_block", "checkpoint": {"config": {"_name_or_path": "bert-base-uncased", "architectures": ["BertForQuestionAnswering"], "attention_probs_dropout_prob": 0.1, "gradient_checkpointing": false, "hidden_act": "gelu", "hidden_dropout_prob": 0.1, "hidden_size": 768, "initializer_range": 0.02, "intermediate_size": 3072, "layer_norm_eps": 1e-12, "max_position_embeddings": 512, "model_type": "bert", "num_attention_heads": 12, "num_hidden_layers": 12, "pad_token_id": 0, "position_embedding_type": "absolute", "type_vocab_size": 2, "vocab_size": 30522}, "eval_metrics": {"exact_match": 77.84295175023652, "f1": 85.93146728512978}, "path": "/data_2to/devel_data/nn_pruning/output/squad_test_aws/aws_nn-pruning-v11-a4-l40-dl1--2021-01-24--15-48-35/checkpoint-105000", "sparse_args": {"ampere_pruning_method": "disabled", "attention_block_cols": 4, "attention_block_rows": 4, "attention_lambda": 1.0, "attention_output_with_dense": 0, "attention_pruning_method": "sigmoied_threshold", "bias_mask": true, "dense_block_cols": 4, "dense_block_rows": 4, "dense_lambda": 1.0, "dense_pruning_method": "sigmoied_threshold", "distil_alpha_ce": 0.1, "distil_alpha_teacher": 0.9, "distil_teacher_name_or_path": "csarron/bert-base-uncased-squad-v1", "distil_temperature": 2.0, "final_ampere_temperature": 20.0, "final_threshold": 0.1, "final_warmup": 10, "initial_ampere_temperature": 0.0, "initial_threshold": 0, "initial_warmup": 1, "mask_init": "constant", "mask_scale": 0.0, "mask_scores_learning_rate": 0.01, "regularization": "l1", "regularization_final_lambda": 40.0}, "speed": {"cuda_eval_elapsed_time": 24.637864067077636, "eval_elapsed_time": 32.05906807305291}, "speedup": 1.5664666750452154, "stats": {"layers": {"0": {"linear_attention_nnz": 244080, "linear_attention_total": 2359296, "linear_dense_nnz": 760240, "linear_dense_total": 4718592, "linear_nnz": 1004320, "linear_total": 7077888, "nnz": 1012052, "total": 7087872}, "1": {"linear_attention_nnz": 377328, "linear_attention_total": 2359296, "linear_dense_nnz": 887488, "linear_dense_total": 4718592, "linear_nnz": 1264816, "linear_total": 7077888, "nnz": 1272860, "total": 7087872}, "10": {"linear_attention_nnz": 166640, "linear_attention_total": 2359296, "linear_dense_nnz": 117888, "linear_dense_total": 4718592, "linear_nnz": 284528, "linear_total": 7077888, "nnz": 290496, "total": 7087872}, "11": {"linear_attention_nnz": 113056, "linear_attention_total": 2359296, "linear_dense_nnz": 110240, "linear_dense_total": 4718592, "linear_nnz": 223296, "linear_total": 7077888, "nnz": 228916, "total": 7087872}, "2": {"linear_attention_nnz": 453680, "linear_attention_total": 2359296, "linear_dense_nnz": 1009680, "linear_dense_total": 4718592, "linear_nnz": 1463360, "linear_total": 7077888, "nnz": 1471780, "total": 7087872}, "3": {"linear_attention_nnz": 549056, "linear_attention_total": 2359296, "linear_dense_nnz": 988176, "linear_dense_total": 4718592, "linear_nnz": 1537232, "linear_total": 7077888, "nnz": 1545700, "total": 7087872}, "4": {"linear_attention_nnz": 480112, "linear_attention_total": 2359296, "linear_dense_nnz": 906608, "linear_dense_total": 4718592, "linear_nnz": 1386720, "linear_total": 7077888, "nnz": 1394928, "total": 7087872}, "5": {"linear_attention_nnz": 397488, "linear_attention_total": 2359296, "linear_dense_nnz": 846544, "linear_dense_total": 4718592, "linear_nnz": 1244032, "linear_total": 7077888, "nnz": 1252028, "total": 7087872}, "6": {"linear_attention_nnz": 373632, "linear_attention_total": 2359296, "linear_dense_nnz": 669920, "linear_dense_total": 4718592, "linear_nnz": 1043552, "linear_total": 7077888, "nnz": 1051416, "total": 7087872}, "7": {"linear_attention_nnz": 393728, "linear_attention_total": 2359296, "linear_dense_nnz": 457008, "linear_dense_total": 4718592, "linear_nnz": 850736, "linear_total": 7077888, "nnz": 857940, "total": 7087872}, "8": {"linear_attention_nnz": 262272, "linear_attention_total": 2359296, "linear_dense_nnz": 280816, "linear_dense_total": 4718592, "linear_nnz": 543088, "linear_total": 7077888, "nnz": 550008, "total": 7087872}, "9": {"linear_attention_nnz": 221824, "linear_attention_total": 2359296, "linear_dense_nnz": 101360, "linear_dense_total": 4718592, "linear_nnz": 323184, "linear_total": 7077888, "nnz": 329008, "total": 7087872}}, "linear_nnz": 11168864, "linear_sparsity": 86.85005093798226, "linear_total": 84934656, "nnz": 35095854, "pruned_heads": {"0": [9, 2, 4, 5], "1": [0, 2, 3, 5, 6, 8], "10": [1, 4, 5, 6, 7, 8], "11": [0, 5, 6, 7, 8, 10, 11], "2": [8, 4, 7], "3": [2, 4, 6], "4": [0, 6], "5": [1, 2, 6, 7, 11], "6": [0, 2, 3, 7], "7": [1, 3, 6, 7, 11], "8": [0, 8, 4, 5], "9": [1, 3, 4, 5, 7, 9, 10]}, "total": 108893186, "total_sparsity": 67.77038555929478}, "training_args": {"_n_gpu": -1, "adafactor": false, "adam_beta1": 0.9, "adam_beta2": 0.999, "adam_epsilon": 1e-08, "dataloader_drop_last": false, "dataloader_num_workers": 0, "dataloader_pin_memory": true, "ddp_find_unused_parameters": null, "debug": false, "deepspeed": null, "disable_tqdm": false, "do_eval": 1, "do_predict": false, "do_train": 1, "eval_accumulation_steps": null, "eval_steps": 5000, "evaluation_strategy": "steps", "fp16": false, "fp16_backend": "auto", "fp16_full_eval": false, "fp16_opt_level": "O1", "gradient_accumulation_steps": 1, "greater_is_better": null, "group_by_length": false, "ignore_data_skip": false, "label_names": null, "label_smoothing_factor": 0.0, "learning_rate": 3e-05, "load_best_model_at_end": false, "local_rank": -1, "logging_dir": "/opt/ml/output", "logging_first_step": false, "logging_steps": 250, "logging_strategy": "steps", "lr_scheduler_type": "linear", "max_grad_norm": 1.0, "max_steps": -1, "metric_for_best_model": null, "no_cuda": false, "num_train_epochs": 20.0, "optimize_model_before_eval": "disabled", "output_dir": "/opt/ml/model", "overwrite_output_dir": 1, "past_index": -1, "per_device_eval_batch_size": 8, "per_device_train_batch_size": 16, "per_gpu_eval_batch_size": null, "per_gpu_train_batch_size": null, "prediction_loss_only": false, "remove_unused_columns": true, "report_to": null, "run_name": "/opt/ml/model", "save_steps": 5000, "save_strategy": "steps", "save_total_limit": 50, "seed": 17, "sharded_ddp": false, "skip_memory_metrics": false, "tpu_metrics_debug": false, "tpu_num_cores": null, "warmup_ratio": 0.0, "warmup_steps": 5400, "weight_decay": 0.0}}, "f1": 85.93146728512978, "fill_rate": 0.1314994906201774, "speedup": 1.5664666750452154}}
